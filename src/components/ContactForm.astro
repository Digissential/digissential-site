---
interface Props {
  subject?: string;
  source?: string;
  class?: string;
}
const {
  subject = "Contact message",
  source = "component",
  class: klass = ""
} = Astro.props as Props;
---
<form
            name="contact"
            method="POST"
            action="/contact/success/"
            data-netlify="true"
            netlify
            netlify-honeypot="bot-field"
            accept-charset="UTF-8"
            class={`mt-4 grid gap-5 ${klass}`.trim()}
          >
            <input type="hidden" name="form-name" value="contact" />
            <input type="hidden" name="subject" value={subject} />
            <input type="hidden" name="form_source" value={source} />
            <p class="hidden" aria-hidden="true">
              <label>Donâ€™t fill this out: <input name="bot-field" /></label>
            </p>
            <label class="text-sm">Name
              <input required name="name" autocomplete="name" placeholder="Your Name"
                class="mt-1 w-full rounded-xl2 bg-white/10 px-3 py-2 outline-none focus:ring-2 focus:ring-digi-primary" />
            </label>
            <label class="text-sm">Email
              <input required type="email" name="email" autocomplete="email" placeholder="your.email@example.com"
                class="mt-1 w-full rounded-xl2 bg-white/10 px-3 py-2 outline-none focus:ring-2 focus:ring-digi-primary" />
            </label>
            <label class="text-sm">Phone (optional)
              <input type="tel" name="phone" inputmode="tel" autocomplete="tel"
                placeholder="066 425 6314"
                class="mt-1 w-full rounded-xl2 bg-white/10 px-3 py-2 outline-none focus:ring-2 focus:ring-digi-primary" />
            </label>
            <fieldset class="text-sm hidden md:block">
              <legend class="mb-1 text-white/80">Common issues (select any)</legend>
              <div class="flex flex-wrap gap-3 text-xs">
                <label class="inline-flex items-center gap-2 leading-none">
                  <input type="checkbox" name="issue_type" value="Malware Removal"
                    class="accent-digi-primary h-4 w-4 align-middle translate-y-[1px]" />Malware Removal
                </label>
                <label class="inline-flex items-center gap-2 leading-none">
                  <input type="checkbox" name="issue_type" value="Data Recovery"
                    class="accent-digi-primary h-4 w-4 align-middle translate-y-[1px]" />Data Recovery
                </label>
                <label class="inline-flex items-center gap-2 leading-none">
                  <input type="checkbox" name="issue_type" value="Windows Reinstall"
                    class="accent-digi-primary h-4 w-4 align-middle translate-y-[1px]" />Windows Reinstall
                </label>
                <label class="inline-flex items-center gap-2 leading-none">
                  <input type="checkbox" name="issue_type" value="Performance"
                    class="accent-digi-primary h-4 w-4 align-middle translate-y-[1px]" />Performance
                </label>
                <label class="inline-flex items-center gap-2 leading-none">
                  <input type="checkbox" name="issue_type" value="Other"
                    class="accent-digi-primary h-4 w-4 align-middle translate-y-[1px]" />Other
                </label>
              </div>
            </fieldset>
            <!-- Mobile select alternative omitted for brevity; keep if present -->
            <label class="text-sm" for="msg">What can we help with?</label>
            <textarea id="msg" required name="message" rows="3" maxlength="700" aria-describedby="qc-count"
              class="mt-1 w-full rounded-2xl bg-white/10 px-3 py-2 outline-none focus:ring-2 focus:ring-digi-primary"
              placeholder="Describe the issue briefly (max 700 chars)"></textarea>
            <div class="text-xs text-white/60" aria-live="polite">Characters: <span id="qc-count">0</span>/700</div>
            <label class="flex items-center gap-2 text-sm text-white/80 font-semibold">
              <input type="checkbox" name="consent" value="yes" required class="accent-digi-primary h-5 w-5" />
              I consent to handling of my info for contact (POPIA).
            </label>
            <button type="submit" class="rounded-xl2 bg-digi-primary px-4 py-2 font-semibold hover:brightness-110">
              Send message
            </button>
          </form>